<html>
	<head>
		<script type="text/javascript" src="../js/coverreport.js">

		</script><script type="text/javascript">
			RANGES_244 = [
   [25,9,25,10,'dccv']
, [26,13,26,38,'dccv']
, [27,9,27,10,'dccv']
, [34,9,34,84,'dccv']
, [35,9,35,10,'dccv']
, [37,13,37,14,'dccv']
, [38,17,38,39,'dccv']
, [39,17,39,38,'dccv']
, [40,17,40,33,'dccv']
, [41,17,41,69,'dccv']
, [42,17,42,61,'dccv']
, [43,17,43,29,'dccv']
, [44,13,44,14,'dccv']
, [49,9,49,10,'dccv']
, [55,9,55,77,'dccv']
, [56,9,56,10,'dccv']
, [58,13,58,14,'dccv']
, [59,17,59,39,'dccv']
, [60,17,60,45,'dccv']
, [62,17,62,52,'dccv']
, [63,17,63,54,'dccv']
, [64,17,64,58,'dccv']
, [65,17,65,64,'dccv']
, [66,13,66,14,'dccv']
, [71,9,71,10,'dccv']
, [77,9,77,10,'dccv']
, [79,13,79,14,'dccv']
, [80,17,80,46,'dccv']
, [81,17,81,18,'dccv']
, [82,21,82,41,'dccv']
, [83,21,83,22,'dccv']
, [84,25,84,94,'dccv']
, [85,25,85,60,'dccv']
, [86,21,86,22,'dccv']
, [87,17,87,18,'dccv']
, [89,17,89,18,'dccv']
, [90,21,90,40,'dccv']
, [95,21,95,22,'dccv']
, [96,25,96,61,'dccv']
, [97,25,97,65,'dccv']
, [98,25,98,71,'dccv']
, [99,21,99,22,'dccv']
, [100,17,100,18,'dccv']
, [101,13,101,14,'dccv']
, [106,9,106,10,'dccv']
, [113,9,113,10,'dccv']
, [114,13,114,34,'dccv']
, [115,9,115,10,'dccv']
, [122,9,122,10,'dccv']
, [123,13,123,37,'dccv']
, [124,9,124,10,'dccv']
, [230,9,230,10,'dccv']
, [231,13,231,30,'dccv']
, [232,9,232,10,'dccv']
, [239,9,239,10,'dccv']
, [240,13,240,32,'dccv']
, [241,9,241,10,'dccv']
, [45,13,45,37,'dcuc']
, [46,13,46,14,'dcuc']
, [47,17,47,53,'dcuc']
, [48,13,48,14,'dcuc']
, [67,13,67,37,'dcuc']
, [68,13,68,14,'dcuc']
, [69,17,69,53,'dcuc']
, [70,13,70,14,'dcuc']
, [91,21,91,22,'dcuc']
, [92,25,92,65,'dcuc']
, [93,21,93,22,'dcuc']
, [102,13,102,37,'dcuc']
, [103,13,103,14,'dcuc']
, [104,17,104,53,'dcuc']
, [105,13,105,14,'dcuc']
, [134,9,134,10,'dcuc']
, [136,13,136,14,'dcuc']
, [137,13,137,14,'dcuc']
, [138,13,138,37,'dcuc']
, [139,13,139,14,'dcuc']
, [140,17,140,53,'dcuc']
, [141,13,141,14,'dcuc']
, [142,9,142,10,'dcuc']
, [149,9,149,10,'dcuc']
, [151,13,151,14,'dcuc']
, [152,13,152,14,'dcuc']
, [153,13,153,37,'dcuc']
, [154,13,154,14,'dcuc']
, [155,17,155,53,'dcuc']
, [156,13,156,14,'dcuc']
, [157,9,157,10,'dcuc']
, [164,9,164,10,'dcuc']
, [166,13,166,14,'dcuc']
, [167,13,167,14,'dcuc']
, [168,13,168,37,'dcuc']
, [169,13,169,14,'dcuc']
, [170,17,170,53,'dcuc']
, [171,13,171,14,'dcuc']
, [172,9,172,10,'dcuc']
, [178,9,178,10,'dcuc']
, [180,13,180,14,'dcuc']
, [181,13,181,14,'dcuc']
, [182,13,182,37,'dcuc']
, [183,13,183,14,'dcuc']
, [184,17,184,53,'dcuc']
, [185,13,185,14,'dcuc']
, [186,9,186,10,'dcuc']
, [193,9,193,10,'dcuc']
, [195,13,195,14,'dcuc']
, [196,13,196,14,'dcuc']
, [197,13,197,37,'dcuc']
, [198,13,198,14,'dcuc']
, [199,17,199,53,'dcuc']
, [200,13,200,14,'dcuc']
, [201,9,201,10,'dcuc']
, [212,9,212,10,'dcuc']
, [213,13,213,29,'dcuc']
, [214,9,214,10,'dcuc']
, [221,9,221,10,'dcuc']
, [222,13,222,35,'dcuc']
, [223,9,223,10,'dcuc']
, [248,9,248,10,'dcuc']
, [249,13,249,34,'dcuc']
, [250,9,250,10,'dcuc']
, [257,9,257,10,'dcuc']
, [258,13,258,29,'dcuc']
, [259,9,259,10,'dcuc']
, [266,9,266,10,'dcuc']
, [267,13,267,31,'dcuc']
, [268,9,268,10,'dcuc']
];
		</script><link rel="stylesheet" type="text/css" href="../css/coverreport.css" />
	</head><body>
		<code id="src244" class="dotCoverSource"><pre>#region

using System;
using LGP.Components.Factory;
using LGP.Components.Factory.Interfaces.Database;

#endregion

namespace LGP.Modules.ModuleEditor.Internal
{
    /// &lt;summary&gt;
    /// &lt;/summary&gt;
    public class ModuleFileGrammerState : IGrammer
    {
        private static int _maxValue;
        private readonly IModule _module;
        private IGrammer _dbGrammer;
        private bool _deleted;
        private int _id;
        private string _key;
        private int _moduleid;
        private string _value;

        static ModuleFileGrammerState()
        {
            _maxValue = int.MaxValue;
        }

        /// &lt;summary&gt;
        /// &lt;/summary&gt;
        /// &lt;param name = &quot;module&quot;&gt;&lt;/param&gt;
        /// &lt;param name = &quot;key&quot;&gt;&lt;/param&gt;
        /// &lt;param name = &quot;value&quot;&gt;&lt;/param&gt;
        public ModuleFileGrammerState( IModule module , string key , string value )
        {
            try
            {
                this._module = module;
                this._id = _maxValue;
                this._key = key;
                this._value = Framework.Utils.Base64Encode( value );
                this._moduleid = this._module.GetModuleId();
                _maxValue--;
            }
            catch( Exception error )
            {
                Framework.EventBus.Publish( error );
            }
        }

        /// &lt;summary&gt;
        /// &lt;/summary&gt;
        /// &lt;param name = &quot;dbGrammer&quot;&gt;&lt;/param&gt;
        /// &lt;param name = &quot;module&quot;&gt;&lt;/param&gt;
        public ModuleFileGrammerState( IGrammer dbGrammer , IModule module )
        {
            try
            {
                this._module = module;
                this._dbGrammer = dbGrammer;

                this._id = this._dbGrammer.GetId();
                this._key = this._dbGrammer.GetKey();
                this._value = this._dbGrammer.GetValue();
                this._moduleid = this._dbGrammer.GetModuleId();
            }
            catch( Exception error )
            {
                Framework.EventBus.Publish( error );
            }
        }


        /// &lt;summary&gt;
        /// &lt;/summary&gt;
        public void Save()
        {
            try
            {
                if( this._dbGrammer == null )
                {
                    if( !this._deleted )
                    {
                        this._dbGrammer = this._module.AddGrammer( this._key , this._value );
                        this._id = this._dbGrammer.GetId();
                    }
                }
                else
                {
                    if( this._deleted )
                    {
                        this._module.DeleteGrammer( this._key );
                    }
                    else
                    {
                        this._dbGrammer.SetKey( this._key );
                        this._dbGrammer.SetValue( this._value );
                        this._dbGrammer.SetModuleId( this._moduleid );
                    }
                }
            }
            catch( Exception error )
            {
                Framework.EventBus.Publish( error );
            }
        }


        /// &lt;summary&gt;
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public bool IsDeleted()
        {
            return this._deleted;
        }


        /// &lt;summary&gt;
        /// &lt;/summary&gt;
        /// &lt;param name = &quot;deleted&quot;&gt;&lt;/param&gt;
        public void SetDeleted( bool deleted )
        {
            this._deleted = deleted;
        }

        #region Implementation of IGrammerObserver

        /// &lt;summary&gt;
        ///   Update this observer with a refernece to the grammer
        /// &lt;/summary&gt;
        /// &lt;param name = &quot;grammer&quot;&gt;IGrammer&lt;/param&gt;
        /// &lt;param name = &quot;source&quot;&gt;IGrammerObserver&lt;/param&gt;
        public void Update( IGrammer grammer , IGrammerObserver source )
        {
            try
            {
            }
            catch( Exception error )
            {
                Framework.EventBus.Publish( error );
            }
        }

        /// &lt;summary&gt;
        ///   Attach objewcts that observer this grammer
        /// &lt;/summary&gt;
        /// &lt;param name = &quot;obj&quot;&gt;IGrammerObserver&lt;/param&gt;
        public void Attach( IGrammerObserver obj )
        {
            try
            {
            }
            catch( Exception error )
            {
                Framework.EventBus.Publish( error );
            }
        }

        /// &lt;summary&gt;
        ///   Detach objewcts that observer this grammer
        /// &lt;/summary&gt;
        /// &lt;param name = &quot;obj&quot;&gt;IGrammerObserver&lt;/param&gt;
        public void Detach( IGrammerObserver obj )
        {
            try
            {
            }
            catch( Exception error )
            {
                Framework.EventBus.Publish( error );
            }
        }

        /// &lt;summary&gt;
        ///   Notify observers of this grammer
        /// &lt;/summary&gt;
        public void Notify()
        {
            try
            {
            }
            catch( Exception error )
            {
                Framework.EventBus.Publish( error );
            }
        }

        /// &lt;summary&gt;
        ///   Dispose this object and all the observers
        /// &lt;/summary&gt;
        /// &lt;param name = &quot;obj&quot;&gt;IGrammerObserver&lt;/param&gt;
        public void Dispose( IGrammerObserver obj )
        {
            try
            {
            }
            catch( Exception error )
            {
                Framework.EventBus.Publish( error );
            }
        }

        #endregion

        #region Implementation of IGrammer

        /// &lt;summary&gt;
        ///   Gets the grammer rowid
        /// &lt;/summary&gt;
        /// &lt;returns&gt;int&lt;/returns&gt;
        public int GetId()
        {
            return this._id;
        }

        /// &lt;summary&gt;
        ///   Gets the grammer moduleid
        /// &lt;/summary&gt;
        /// &lt;returns&gt;int&lt;/returns&gt;
        public int GetModuleId()
        {
            return this._moduleid;
        }

        /// &lt;summary&gt;
        ///   Gets the grammer key
        /// &lt;/summary&gt;
        /// &lt;returns&gt;string&lt;/returns&gt;
        public string GetKey()
        {
            return this._key;
        }

        /// &lt;summary&gt;
        ///   Gets the grammer value
        /// &lt;/summary&gt;
        /// &lt;returns&gt;string&lt;/returns&gt;
        public string GetValue()
        {
            return this._value;
        }

        /// &lt;summary&gt;
        ///   Sets the grammer moduleid
        /// &lt;/summary&gt;
        /// &lt;param name = &quot;val&quot;&gt;int&lt;/param&gt;
        public void SetModuleId( int val )
        {
            this._moduleid = val;
        }

        /// &lt;summary&gt;
        ///   Sets the grammer key
        /// &lt;/summary&gt;
        /// &lt;param name = &quot;val&quot;&gt;string&lt;/param&gt;
        public void SetKey( string val )
        {
            this._key = val;
        }

        /// &lt;summary&gt;
        ///   Sets the grammer value
        /// &lt;/summary&gt;
        /// &lt;param name = &quot;val&quot;&gt;string&lt;/param&gt;
        public void SetValue( string val )
        {
            this._value = val;
        }

        #endregion
    }
}</pre></code><script type="text/javascript">
			applyranges('src244', RANGES_244)
		</script>
	</body>
</html>